{"version":3,"sources":["constants.js","Cell.js","Grid.js","utils.js","Game.js","app.js"],"names":["BOARD_SIZE","CELL_TYPES","Cell","value","el","document","createElement","classList","add","style","backgroundColor","Math","floor","length","random","Grid","rows","_buildRows","_buildEl","size","i","row","j","push","pos","col","cell","posOne","posTwo","cellOne","_getCell","_setCell","gridEl","forEach","rowEl","appendChild","getEl","once","func","hasHappened","Game","gameEl","initialCell","grid","isAnimating","_render","_setListeners","swapAfterTransitionend","bind","initialPos","targetPos","evt","console","log","cellTwo","cellOneRect","getBoundingClientRect","cellTwoRect","top","left","getPosition","cellOneClone","cloneNode","cellTwoClone","addEventListener","replaceWith","swapCells","target","matches","remove","targetCell","_swapEls","_swapCells","parentNode","children","indexOf","firstChild","game","getElementById"],"mappings":"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","file":"app.21bccfbf.map","sourceRoot":"../src","sourcesContent":["export const BOARD_SIZE = 11;\n\nexport const CELL_TYPES = [\n  'red', 'green', 'lightblue', 'yellow', 'white', 'lavender', 'orange', 'pink'\n];","import { CELL_TYPES } from './constants'\n\nclass Cell {\n  constructor(value) {\n    this.value = value;\n  }\n\n  static random() {\n    return new Cell(\n      CELL_TYPES[Math.floor(CELL_TYPES.length * Math.random())]\n    )\n  }\n\n  getEl() { \n    const el = document.createElement('div');\n    el.classList.add('cell');\n    el.style.backgroundColor = this.value;\n    return el;\n  }\n}\n\nexport default Cell;","import { BOARD_SIZE } from './constants'\n\nimport Cell from './Cell'\n\nclass Grid {\n  constructor() {\n    this.rows = this._buildRows(BOARD_SIZE);\n    this.el = this._buildEl()\n  }\n\n  _buildEl() {\n    const el = document.createElement('div')\n  }\n\n  _buildRows(size) {\n    const rows = [];\n\n    for (let i = 0; i < size; i++) {\n      const row = [];\n\n      for (let j = 0; j < size; j++) {\n        row.push(Cell.random());\n      }\n\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  _getCell(pos) {\n    return this.rows[pos.row][pos.col];\n  }\n\n  _setCell(pos, cell) {\n    this.rows[pos.row][pos.col] = cell;\n  }\n\n  swapCells(posOne, posTwo) {\n    const cellOne = this._getCell(posOne);\n    this._setCell(posOne, this._getCell(posTwo));\n    this._setCell(posTwo, cellOne);\n  }\n\n  getEl() {\n    const gridEl = document.createElement('div');\n    gridEl.classList.add('grid');\n\n    this.rows.forEach(row => {\n      const rowEl = document.createElement('div');\n      rowEl.classList.add('row');\n\n      row.forEach(cell => {\n        rowEl.appendChild(cell.getEl());\n      })\n\n      gridEl.appendChild(rowEl);\n    })\n\n    return gridEl;\n  }\n}\n\nexport default Grid;","export const once = (func) => {\n  let hasHappened = false;\n\n  return function(...args) {\n    if (hasHappened) { return; }\n\n    hasHappened = true;\n    return func(...args);\n  }\n}","import Grid from './Grid';\nimport { once } from './utils';\n\nclass Game {\n  constructor(gameEl) {\n    this.gameEl = gameEl;\n    this.initialCell = null;\n    this.grid = new Grid();\n\n    this.isAnimating = false;\n\n    this._render();\n    this._setListeners();\n\n    this.swapAfterTransitionend = this.swapAfterTransitionend.bind(this)\n  }\n\n  swapAfterTransitionend(initialPos, targetPos, evt) {\n    console.log(\"TRANSITIONENDSWAP TRIGGERING\")\n    \n  }\n\n  _swapEls(cellOne, cellTwo) {\n    const cellOneRect = cellOne.getBoundingClientRect();\n    const cellTwoRect = cellTwo.getBoundingClientRect();\n\n    cellTwo.style.top = cellOneRect.top - cellTwoRect.top;\n    cellTwo.style.left = cellOneRect.left - cellTwoRect.left;\n    cellOne.style.top = cellTwoRect.top - cellOneRect.top;\n    cellOne.style.left = cellTwoRect.left - cellOneRect.left;\n  }\n\n  _swapCells(cellOne, cellTwo) {\n    const posOne = this.getPosition(cellOne);\n    const posTwo = this.getPosition(cellTwo);\n\n    const cellOneClone = cellOne.cloneNode();\n    const cellTwoClone = cellTwo.cloneNode();\n\n    cellOneClone.style.top = 0;\n    cellOneClone.style.left = 0;\n    cellTwoClone.style.top = 0;\n    cellTwoClone.style.left = 0;\n\n    cellOne.addEventListener('transitionend', once(() => {\n      this.isAnimating = false;\n      cellOne.replaceWith(cellTwoClone);\n      cellTwo.replaceWith(cellOneClone);\n      this.grid.swapCells(posOne, posTwo);\n      // this._render();\n    }));\n  }\n\n  _setListeners() {\n    this.gameEl.addEventListener('mousedown', (evt) => {\n      if (this.isAnimating || !evt.target.matches('.cell')) { return; }\n\n      if (this.initialCell && this.initialCell == evt.target) {\n        this.initialCell.classList.remove('selected');\n        this.initialCell = null;\n        return;\n      }\n\n      if (this.initialCell) {\n        const initialCell = this.initialCell;\n        const targetCell = evt.target;\n\n        this.isAnimating = true;\n        \n        this.initialCell.classList.remove('selected');\n        this.initialCell = null;\n\n        this._swapEls(initialCell, targetCell);\n        this._swapCells(initialCell, targetCell);\n      } else {\n        this.initialCell = evt.target;\n        this.initialCell.classList.add('selected')\n      }\n    })\n  }\n\n  getPosition(cell) {\n    if (!cell.matches('.cell')) { return; }\n\n    const col = [...cell.parentNode.children].indexOf(cell);\n    const row = [...this.gridEl.children].indexOf(cell.parentNode);\n\n    return { row, col };\n  }\n\n  _render() {\n    while (this.gameEl.firstChild) {\n      this.gameEl.firstChild.remove();\n    }\n    \n    this.gridEl = this.grid.getEl();\n    this.gameEl.appendChild(this.gridEl);\n  }\n}\n\nexport default Game;","import Game from './Game'\n\nconst game = new Game(\n  document.getElementById('game')\n)\n"]}