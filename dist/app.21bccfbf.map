{"version":3,"sources":["constants.js","Cell.js","Grid.js","utils.js","Game.js","app.js"],"names":["BOARD_SIZE","CELL_TYPES","Cell","value","el","document","createElement","classList","add","style","backgroundColor","Math","floor","length","random","Grid","rows","_buildRows","_buildEl","size","i","row","j","push","pos","col","cell","posOne","posTwo","cellOne","_getCell","_setCell","gridEl","forEach","rowEl","appendChild","getEl","once","func","hasHappened","Game","gameEl","initialCell","grid","isAnimating","_render","_setListeners","swapAfterTransitionend","bind","initialPos","targetPos","evt","console","log","cellTwo","cellOneRect","getBoundingClientRect","cellTwoRect","top","left","getPosition","addEventListener","swapCells","target","matches","remove","targetCell","_swapEls","_swapCells","parentNode","children","indexOf","firstChild","game","getElementById"],"mappings":"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","file":"app.21bccfbf.map","sourceRoot":"../src","sourcesContent":["export const BOARD_SIZE = 11;\n\nexport const CELL_TYPES = [\n  'red', 'green', 'lightblue', 'yellow', 'white', 'lavender', 'orange', 'pink'\n];","import { CELL_TYPES } from './constants'\n\nclass Cell {\n  constructor(value) {\n    this.value = value;\n  }\n\n  static random() {\n    return new Cell(\n      CELL_TYPES[Math.floor(CELL_TYPES.length * Math.random())]\n    )\n  }\n\n  getEl() { \n    const el = document.createElement('div');\n    el.classList.add('cell');\n    el.style.backgroundColor = this.value;\n    return el;\n  }\n}\n\nexport default Cell;","import { BOARD_SIZE } from './constants'\n\nimport Cell from './Cell'\n\nclass Grid {\n  constructor() {\n    this.rows = this._buildRows(BOARD_SIZE);\n    this.el = this._buildEl()\n  }\n\n  _buildEl() {\n    const el = document.createElement('div')\n  }\n\n  _buildRows(size) {\n    const rows = [];\n\n    for (let i = 0; i < size; i++) {\n      const row = [];\n\n      for (let j = 0; j < size; j++) {\n        row.push(Cell.random());\n      }\n\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  _getCell(pos) {\n    return this.rows[pos.row][pos.col];\n  }\n\n  _setCell(pos, cell) {\n    this.rows[pos.row][pos.col] = cell;\n  }\n\n  swapCells(posOne, posTwo) {\n    const cellOne = this._getCell(posOne);\n    this._setCell(posOne, this._getCell(posTwo));\n    this._setCell(posTwo, cellOne);\n  }\n\n  getEl() {\n    const gridEl = document.createElement('div');\n    gridEl.classList.add('grid');\n\n    this.rows.forEach(row => {\n      const rowEl = document.createElement('div');\n      rowEl.classList.add('row');\n\n      row.forEach(cell => {\n        rowEl.appendChild(cell.getEl());\n      })\n\n      gridEl.appendChild(rowEl);\n    })\n\n    return gridEl;\n  }\n}\n\nexport default Grid;","export const once = (func) => {\n  let hasHappened = false;\n\n  return function(...args) {\n    if (hasHappened) { return; }\n\n    hasHappened = true;\n    return func(...args);\n  }\n}","import Grid from './Grid';\nimport { once } from './utils';\n\nclass Game {\n  constructor(gameEl) {\n    this.gameEl = gameEl;\n    this.initialCell = null;\n    this.grid = new Grid();\n\n    this.isAnimating = false;\n\n    this._render();\n    this._setListeners();\n\n    this.swapAfterTransitionend = this.swapAfterTransitionend.bind(this)\n  }\n\n  swapAfterTransitionend(initialPos, targetPos, evt) {\n    console.log(\"TRANSITIONENDSWAP TRIGGERING\")\n    \n  }\n\n  _swapEls(cellOne, cellTwo) {\n    const cellOneRect = cellOne.getBoundingClientRect();\n    const cellTwoRect = cellTwo.getBoundingClientRect();\n\n    cellTwo.style.top = cellOneRect.top - cellTwoRect.top;\n    cellTwo.style.left = cellOneRect.left - cellTwoRect.left;\n    cellOne.style.top = cellTwoRect.top - cellOneRect.top;\n    cellOne.style.left = cellTwoRect.left - cellOneRect.left;\n  }\n\n  _swapCells(cellOne, cellTwo) {\n    const posOne = this.getPosition(cellOne);\n    const posTwo = this.getPosition(cellTwo);\n\n    cellOne.addEventListener('transitionend', once(() => {\n      this.isAnimating = false;\n      this.grid.swapCells(posOne, posTwo);     \n      this._render();\n    }));\n  }\n\n  _setListeners() {\n    this.gameEl.addEventListener('mousedown', (evt) => {\n      if (this.isAnimating || !evt.target.matches('.cell')) { return; }\n\n      if (this.initialCell && this.initialCell == evt.target) {\n        this.initialCell.classList.remove('selected');\n        this.initialCell = null;\n        return;\n      }\n\n      if (this.initialCell) {\n        const initialCell = this.initialCell;\n        const targetCell = evt.target;\n\n        this.isAnimating = true;\n        \n        this.initialCell.classList.remove('selected');\n        this.initialCell = null;\n\n        this._swapEls(initialCell, targetCell);\n        this._swapCells(initialCell, targetCell);\n      } else {\n        this.initialCell = evt.target;\n        this.initialCell.classList.add('selected')\n      }\n    })\n  }\n\n  getPosition(cell) {\n    if (!cell.matches('.cell')) { return; }\n\n    const col = [...cell.parentNode.children].indexOf(cell);\n    const row = [...this.gridEl.children].indexOf(cell.parentNode);\n\n    return { row, col };\n  }\n\n  _render() {\n    while (this.gameEl.firstChild) {\n      this.gameEl.firstChild.remove();\n    }\n    \n    this.gridEl = this.grid.getEl();\n    this.gameEl.appendChild(this.gridEl);\n  }\n}\n\nexport default Game;","import Game from './Game'\n\nconst game = new Game(\n  document.getElementById('game')\n)\n"]}